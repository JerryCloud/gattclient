<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ble_gatt_client: src/mainloop.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ble_gatt_client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mainloop_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mainloop.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>set of function to manage the epool loop  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/signalfd.h&gt;</code><br />
<code>#include &lt;sys/timerfd.h&gt;</code><br />
<code>#include &lt;sys/epoll.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mainloop_8h_source.html">mainloop.h</a>&quot;</code><br />
</div>
<p><a href="mainloop_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmainloop__data.html">mainloop_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimeout__data.html">timeout_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsignal__data.html">signal_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afc006591e1289be0aef777083bf22b8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#afc006591e1289be0aef777083bf22b8a">MAX_EPOLL_EVENTS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:afc006591e1289be0aef777083bf22b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55077ef9c427822b4a8981903d293ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#ae55077ef9c427822b4a8981903d293ee">MAX_MAINLOOP_ENTRIES</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ae55077ef9c427822b4a8981903d293ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2a5353c4b9a09c8a2dfeb5c66d1c1652"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652">EPOLL_EVENTS_DOC</a> { <br />
&#160;&#160;<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652af6b09ce17d1d03b236b5f3604645ac93">EPOLLERR_DOC</a> =EPOLLERR, 
<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652afb60ce2fd2b07674cfbf9aaf0298668d">EPOLLET_DOC</a> =EPOLLET, 
<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652a3bbcb1325236956c3874fc4460c292cc">EPOLLHUP_DOC</a> =EPOLLHUP, 
<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652ac224535d6dc4ee39c1d9ddb935dd21df">EPOLLIN_DOC</a> =EPOLLIN, 
<br />
&#160;&#160;<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652a835a3ff38d6ce9cb64aca478f93817c9">EPOLLONESHOT_DOC</a> =EPOLLONESHOT, 
<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652a15dfad2b7bf31ead914d31cabc8cd072">EPOLLOUT_DOC</a> =EPOLLOUT, 
<a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652a04af26276938824836be39d5823a16ca">EPOLLPRI_DOC</a> =EPOLLPRI
<br />
 }</td></tr>
<tr class="memdesc:a2a5353c4b9a09c8a2dfeb5c66d1c1652"><td class="mdescLeft">&#160;</td><td class="mdescRight">describe EPOLL possible events  <a href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652">More...</a><br /></td></tr>
<tr class="separator:a2a5353c4b9a09c8a2dfeb5c66d1c1652"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c350ab430543049a395cbb821ce05a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a3c350ab430543049a395cbb821ce05a7">mainloop_init</a> (void)</td></tr>
<tr class="separator:a3c350ab430543049a395cbb821ce05a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a131504807b960e1a23074d9f7029ae13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a131504807b960e1a23074d9f7029ae13">mainloop_quit</a> (void)</td></tr>
<tr class="separator:a131504807b960e1a23074d9f7029ae13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04caa8b5ab23f7240658bc09d1cd626c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a04caa8b5ab23f7240658bc09d1cd626c">mainloop_exit_success</a> (void)</td></tr>
<tr class="separator:a04caa8b5ab23f7240658bc09d1cd626c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0fe5aeddf6b383af28c90b146191ae0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#af0fe5aeddf6b383af28c90b146191ae0">mainloop_exit_failure</a> (void)</td></tr>
<tr class="separator:af0fe5aeddf6b383af28c90b146191ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21b41e04fb81a9f79319b21b6a8918bf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a21b41e04fb81a9f79319b21b6a8918bf">signal_callback</a> (int fd, uint32_t events, void *user_data)</td></tr>
<tr class="separator:a21b41e04fb81a9f79319b21b6a8918bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39779b8d56ff2d11bd7db2065bf39aa3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a39779b8d56ff2d11bd7db2065bf39aa3">mainloop_run</a> (void)</td></tr>
<tr class="separator:a39779b8d56ff2d11bd7db2065bf39aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fc2a8a9fc2f5699af8cda114ed288c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a28fc2a8a9fc2f5699af8cda114ed288c">mainloop_add_fd</a> (int fd, uint32_t events, <a class="el" href="mainloop_8h.html#aabf37b2b3e27564817db9d17a632bd19">mainloop_event_func</a> callback, void *user_data, <a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a> destroy)</td></tr>
<tr class="separator:a28fc2a8a9fc2f5699af8cda114ed288c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9305fafee2f8cf38c6dc349168e3ce0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a9305fafee2f8cf38c6dc349168e3ce0f">mainloop_modify_fd</a> (int fd, uint32_t events)</td></tr>
<tr class="separator:a9305fafee2f8cf38c6dc349168e3ce0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdcc98d1655c0ccb0a336d7e10fb3614"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#abdcc98d1655c0ccb0a336d7e10fb3614">mainloop_remove_fd</a> (int fd)</td></tr>
<tr class="separator:abdcc98d1655c0ccb0a336d7e10fb3614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42b3dce8d57fa7c39152e9ca0731cc9b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a42b3dce8d57fa7c39152e9ca0731cc9b">timeout_destroy</a> (void *user_data)</td></tr>
<tr class="separator:a42b3dce8d57fa7c39152e9ca0731cc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c3175b24d9f91a396174130303f6ce8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a0c3175b24d9f91a396174130303f6ce8">timeout_callback</a> (int fd, uint32_t events, void *user_data)</td></tr>
<tr class="separator:a0c3175b24d9f91a396174130303f6ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adddfd93042e7423109cc8ab1b08c2917"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#adddfd93042e7423109cc8ab1b08c2917">timeout_set</a> (int fd, unsigned int msec)</td></tr>
<tr class="separator:adddfd93042e7423109cc8ab1b08c2917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898041ac76512348efcfa124889aa3d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a898041ac76512348efcfa124889aa3d6">mainloop_add_timeout</a> (unsigned int msec, <a class="el" href="mainloop_8h.html#a83bc8b034d7a1e7e46053a4ebb09b1ce">mainloop_timeout_func</a> callback, void *user_data, <a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a> destroy)</td></tr>
<tr class="separator:a898041ac76512348efcfa124889aa3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb71f85b2ea1fd23d57a18c6aec18b3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#aeb71f85b2ea1fd23d57a18c6aec18b3f">mainloop_modify_timeout</a> (int id, unsigned int msec)</td></tr>
<tr class="separator:aeb71f85b2ea1fd23d57a18c6aec18b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59dff131381982a3afdf76df6bdae269"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a59dff131381982a3afdf76df6bdae269">mainloop_remove_timeout</a> (int id)</td></tr>
<tr class="separator:a59dff131381982a3afdf76df6bdae269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa77d9d0581c9b48125f5c8d315a33d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#aaa77d9d0581c9b48125f5c8d315a33d9">mainloop_set_signal</a> (sigset_t *mask, <a class="el" href="mainloop_8h.html#ad4456218cbf59916b0a4360f9a935ad1">mainloop_signal_func</a> callback, void *user_data, <a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a> destroy)</td></tr>
<tr class="separator:aaa77d9d0581c9b48125f5c8d315a33d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae4afe2171ee3ec9b9cce747171f0b20d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#ae4afe2171ee3ec9b9cce747171f0b20d">epoll_fd</a></td></tr>
<tr class="separator:ae4afe2171ee3ec9b9cce747171f0b20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64cf39a3bf05e24f4d0331c85c07e827"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a64cf39a3bf05e24f4d0331c85c07e827">epoll_terminate</a></td></tr>
<tr class="separator:a64cf39a3bf05e24f4d0331c85c07e827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9324a9ff7dc6697dd77f02998d5e77d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a9324a9ff7dc6697dd77f02998d5e77d7">exit_status</a></td></tr>
<tr class="separator:a9324a9ff7dc6697dd77f02998d5e77d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f2fabeb2cfcd6ddbba570d68c4b947"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmainloop__data.html">mainloop_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#a83f2fabeb2cfcd6ddbba570d68c4b947">mainloop_list</a> [<a class="el" href="mainloop_8c.html#ae55077ef9c427822b4a8981903d293ee">MAX_MAINLOOP_ENTRIES</a>]</td></tr>
<tr class="separator:a83f2fabeb2cfcd6ddbba570d68c4b947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa807b18251fb64f848595c04cef4b27f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structsignal__data.html">signal_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mainloop_8c.html#aa807b18251fb64f848595c04cef4b27f">signal_data</a></td></tr>
<tr class="separator:aa807b18251fb64f848595c04cef4b27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>set of function to manage the epool loop </p>
<dl class="section author"><dt>Author</dt><dd>Gilbert Brault </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Gilbert Brault 2015 the original work comes from bluez v5.39 value add: documenting main features </dd></dl>

<p>Definition in file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="afc006591e1289be0aef777083bf22b8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_EPOLL_EVENTS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00129">129</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae55077ef9c427822b4a8981903d293ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_MAINLOOP_ENTRIES&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00143">143</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00320">mainloop_add_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00169">mainloop_init()</a>, <a class="el" href="mainloop_8c_source.html#l00364">mainloop_modify_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00390">mainloop_remove_fd()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652">EPOLL_EVENTS_DOC</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>describe EPOLL possible events </p>
<p><code> </p><pre class="fragment">those value are used in the epoll_ctl( )

 int epoll_ctl (int epfd,
                 int op,
                 int fd,
                 struct epoll_event *event);

 struct epoll_event {
   _  _u32 events;
   union {
           void *ptr;
           int fd;
           _  _u32 u32;
           _  _u64 u64;
   } data;
 };

 A successful call to epoll_ctl( ) controls the epoll instance associated with the file descriptor epfd.
 The parameter op specifies the operation to be taken against the file associated with fd.
 The event parameter further describes the behavior of the operation.

 Here are valid values for the op parameter

 EPOLL_CTL_ADD
     Add a monitor on the file associated with the file descriptor fd to the epoll instance associated with epfd, per the events defined in event.
 EPOLL_CTL_DEL
     Remove a monitor on the file associated with the file descriptor fd from the epoll instance associated with epfd.
 EPOLL_CTL_MOD
    Modify an existing monitor of fd with the updated events specified by event.

 The events field in the epoll_event structure lists which events to monitor on the given file descriptor.
 Multiple events can be bitwise-ORed together.

 Edge- Versus Level-Triggered Events

If the EPOLLET value is set in the events field of the event parameter passed to epoll_ctl( ),
the watch on fd is edge-triggered, as opposed to level-triggered.

Consider the following events between a producer and a consumer communicating over a Unix pipe:

    The producer writes 1 KB of data onto a pipe.

    The consumer performs an epoll_wait( ) on the pipe, waiting for the pipe to contain data, and thus be readable.

With a level-triggered watch, the call to epoll_wait( ) in step 2 will return immediately,
showing that the pipe is ready to read. With an edge-triggered watch,
this call will not return until after step 1 occurs. That is, even if the pipe is readable
at the invocation of epoll_wait( ), the call will not return until the data is written onto
the pipe.

Level-triggered is the default behavior. It is how poll( ) and select( ) behave,
and it is what most developers expect. Edge-triggered behavior requires a different approach
to programming, commonly utilizing nonblocking I/O, and careful checking for EAGAIN.
</pre><p></code></p>
<p><code> </code> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652af6b09ce17d1d03b236b5f3604645ac93"></a>EPOLLERR_DOC&#160;</td><td class="fielddoc">
<p>An error condition occurred on the file. This event is always monitored, even if it's not specified. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652afb60ce2fd2b07674cfbf9aaf0298668d"></a>EPOLLET_DOC&#160;</td><td class="fielddoc">
<p>Enables edge-triggered behavior for the monitor of the file (see the upcoming section "Edge- Versus Level-Triggered Events"). The default behavior is level-triggered. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652a3bbcb1325236956c3874fc4460c292cc"></a>EPOLLHUP_DOC&#160;</td><td class="fielddoc">
<p>A hangup occurred on the file. This event is always monitored, even if it's not specified. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652ac224535d6dc4ee39c1d9ddb935dd21df"></a>EPOLLIN_DOC&#160;</td><td class="fielddoc">
<p>The file is available to be read from without blocking. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652a835a3ff38d6ce9cb64aca478f93817c9"></a>EPOLLONESHOT_DOC&#160;</td><td class="fielddoc">
<p>After an event is generated and read, the file is automatically no longer monitored. A new event mask must be specified via EPOLL_CTL_MOD to reenable the watch. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652a15dfad2b7bf31ead914d31cabc8cd072"></a>EPOLLOUT_DOC&#160;</td><td class="fielddoc">
<p>The file is available to be written to without blocking. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2a5353c4b9a09c8a2dfeb5c66d1c1652a04af26276938824836be39d5823a16ca"></a>EPOLLPRI_DOC&#160;</td><td class="fielddoc">
<p>There is urgent out-of-band data available to read. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00110">110</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a28fc2a8a9fc2f5699af8cda114ed288c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_add_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#aabf37b2b3e27564817db9d17a632bd19">mainloop_event_func</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a>&#160;</td>
          <td class="paramname"><em>destroy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>trigger an event to be processed by the mainloop_run function and create a mainloop_list entry </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="mainloop_8c.html#a2a5353c4b9a09c8a2dfeb5c66d1c1652" title="describe EPOLL possible events ">EPOLL_EVENTS_DOC</a> for events description</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>"file descriptor" source of the event (socket) </td></tr>
    <tr><td class="paramname">events</td><td>event flags EPOOL type like EPOLLIN, EPOLLOUT... </td></tr>
    <tr><td class="paramname">callback</td><td>function to call back by the event processor </td></tr>
    <tr><td class="paramname">user_data</td><td>associated data </td></tr>
    <tr><td class="paramname">destroy</td><td>management function to unallocate user_data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success else &lt;0 error </dd></dl>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00320">320</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00138">mainloop_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00139">mainloop_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00131">epoll_fd</a>, <a class="el" href="mainloop_8c_source.html#l00137">mainloop_data::events</a>, <a class="el" href="mainloop_8c_source.html#l00136">mainloop_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00143">MAX_MAINLOOP_ENTRIES</a>, and <a class="el" href="mainloop_8c_source.html#l00140">mainloop_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="io-mainloop_8c_source.html#l00165">io_new()</a>, <a class="el" href="btgattclient_8c_source.html#l01893">main()</a>, <a class="el" href="mainloop_8c_source.html#l00456">mainloop_add_timeout()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a898041ac76512348efcfa124889aa3d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_add_timeout </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#a83bc8b034d7a1e7e46053a4ebb09b1ce">mainloop_timeout_func</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a>&#160;</td>
          <td class="paramname"><em>destroy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00456">456</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00149">timeout_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00150">timeout_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00148">timeout_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00320">mainloop_add_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00425">timeout_callback()</a>, <a class="el" href="mainloop_8c_source.html#l00414">timeout_destroy()</a>, <a class="el" href="mainloop_8c_source.html#l00442">timeout_set()</a>, and <a class="el" href="mainloop_8c_source.html#l00151">timeout_data::user_data</a>.</p>

</div>
</div>
<a class="anchor" id="af0fe5aeddf6b383af28c90b146191ae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_exit_failure </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set exit_status to EXIT_FAILURE set epoll_terminate to 1 (mainloop_run exit looping) </p>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00203">203</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00132">epoll_terminate</a>, and <a class="el" href="mainloop_8c_source.html#l00133">exit_status</a>.</p>

</div>
</div>
<a class="anchor" id="a04caa8b5ab23f7240658bc09d1cd626c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_exit_success </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set exit_status to EXIT_SUCCESS set epoll_terminate to 1 (mainloop_run exit looping) </p>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00193">193</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00132">epoll_terminate</a>, and <a class="el" href="mainloop_8c_source.html#l00133">exit_status</a>.</p>

</div>
</div>
<a class="anchor" id="a3c350ab430543049a395cbb821ce05a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create the epoll resource (epoll_fd global variable) initialize mainloop_list (global variable) event table set epoll_terminate to 0 (mainloop_run looping) </p>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00169">169</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00131">epoll_fd</a>, <a class="el" href="mainloop_8c_source.html#l00132">epoll_terminate</a>, and <a class="el" href="mainloop_8c_source.html#l00143">MAX_MAINLOOP_ENTRIES</a>.</p>

<p>Referenced by <a class="el" href="btgattclient_8c_source.html#l01893">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a9305fafee2f8cf38c6dc349168e3ce0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_modify_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>trigger an epoll event for an existing mainloop socket (exisiting mainloop_list[fd]) epool event "events" = events, "data.ptr" = mainloop_list[fd]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>socket </td></tr>
    <tr><td class="paramname">events</td><td>EPOLL event like EPOLLIN, EPOLLOUT... </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0==Success &lt;0 error </dd></dl>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00364">364</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00131">epoll_fd</a>, <a class="el" href="mainloop_8c_source.html#l00137">mainloop_data::events</a>, <a class="el" href="mainloop_8c_source.html#l00136">mainloop_data::fd</a>, and <a class="el" href="mainloop_8c_source.html#l00143">MAX_MAINLOOP_ENTRIES</a>.</p>

<p>Referenced by <a class="el" href="io-mainloop_8c_source.html#l00102">io_callback()</a>, <a class="el" href="io-mainloop_8c_source.html#l00283">io_set_disconnect_handler()</a>, <a class="el" href="io-mainloop_8c_source.html#l00221">io_set_read_handler()</a>, <a class="el" href="io-mainloop_8c_source.html#l00252">io_set_write_handler()</a>, and <a class="el" href="mainloop_8c_source.html#l00497">mainloop_modify_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb71f85b2ea1fd23d57a18c6aec18b3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_modify_timeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00497">497</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00364">mainloop_modify_fd()</a>, and <a class="el" href="mainloop_8c_source.html#l00442">timeout_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a131504807b960e1a23074d9f7029ae13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_quit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set epoll_terminate to 1 (mainloop_run exit looping) </p>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00184">184</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00132">epoll_terminate</a>.</p>

<p>Referenced by <a class="el" href="btgattclient_8c_source.html#l00160">att_disconnect_cb()</a>, <a class="el" href="btgattclient_8c_source.html#l01645">cmd_quit()</a>, <a class="el" href="btgattclient_8c_source.html#l01708">prompt_read_cb()</a>, <a class="el" href="mainloop_8c_source.html#l00215">signal_callback()</a>, and <a class="el" href="btgattclient_8c_source.html#l01763">signal_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="abdcc98d1655c0ccb0a336d7e10fb3614"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_remove_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00390">390</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00139">mainloop_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00131">epoll_fd</a>, <a class="el" href="mainloop_8c_source.html#l00136">mainloop_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00143">MAX_MAINLOOP_ENTRIES</a>, and <a class="el" href="mainloop_8c_source.html#l00140">mainloop_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="io-mainloop_8c_source.html#l00102">io_callback()</a>, <a class="el" href="io-mainloop_8c_source.html#l00189">io_destroy()</a>, <a class="el" href="mainloop_8c_source.html#l00510">mainloop_remove_timeout()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a59dff131381982a3afdf76df6bdae269"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_remove_timeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00510">510</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00390">mainloop_remove_fd()</a>.</p>

</div>
</div>
<a class="anchor" id="a39779b8d56ff2d11bd7db2065bf39aa3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main loop wait for epoll events to exit the loop, set epoll_terminate to a &lt;&gt;0 value </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="mainloop_8c.html#af0fe5aeddf6b383af28c90b146191ae0">mainloop_exit_failure</a> </dd>
<dd>
<a class="el" href="mainloop_8c.html#a04caa8b5ab23f7240658bc09d1cd626c">mainloop_exit_success</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>exit_status EXIT_SUCCESS or EXIT_FAILURE </dd></dl>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00242">242</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00138">mainloop_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00139">mainloop_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00158">signal_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00131">epoll_fd</a>, <a class="el" href="mainloop_8c_source.html#l00132">epoll_terminate</a>, <a class="el" href="mainloop_8c_source.html#l00133">exit_status</a>, <a class="el" href="mainloop_8c_source.html#l00136">mainloop_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00155">signal_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00320">mainloop_add_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00390">mainloop_remove_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00156">signal_data::mask</a>, <a class="el" href="mainloop_8c_source.html#l00143">MAX_MAINLOOP_ENTRIES</a>, <a class="el" href="mainloop_8c_source.html#l00215">signal_callback()</a>, <a class="el" href="mainloop_8c_source.html#l00140">mainloop_data::user_data</a>, and <a class="el" href="mainloop_8c_source.html#l00159">signal_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="btgattclient_8c_source.html#l01893">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa77d9d0581c9b48125f5c8d315a33d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_set_signal </td>
          <td>(</td>
          <td class="paramtype">sigset_t *&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#ad4456218cbf59916b0a4360f9a935ad1">mainloop_signal_func</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mainloop_8h.html#a210e30c1e2ed19f8f50c69e110b626c0">mainloop_destroy_func</a>&#160;</td>
          <td class="paramname"><em>destroy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set mainloop signal handler (<a class="el" href="structsignal__data.html">signal_data</a>) usally SIGINT and SIGTERM handler <a class="el" href="structsignal__data.html">signal_data</a> is a global variable</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mask</td><td>events to filter </td></tr>
    <tr><td class="paramname">callback</td><td>function call triggered by filtered events prototype callback(int signum, void *user_data) </td></tr>
    <tr><td class="paramname">user_data</td><td>user data to pass to callback </td></tr>
    <tr><td class="paramname">destroy</td><td>user data storage management </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success else &lt;0 error </dd></dl>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00525">525</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00157">signal_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00158">signal_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00155">signal_data::fd</a>, <a class="el" href="mainloop_8c_source.html#l00156">signal_data::mask</a>, and <a class="el" href="mainloop_8c_source.html#l00159">signal_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="btgattclient_8c_source.html#l01893">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a21b41e04fb81a9f79319b21b6a8918bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void signal_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td></td></tr>
    <tr><td class="paramname">events</td><td></td></tr>
    <tr><td class="paramname">user_data</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00215">215</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00157">signal_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00184">mainloop_quit()</a>, and <a class="el" href="mainloop_8c_source.html#l00159">signal_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c3175b24d9f91a396174130303f6ce8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timeout_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00425">425</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00149">timeout_data::callback</a>, <a class="el" href="mainloop_8c_source.html#l00148">timeout_data::fd</a>, and <a class="el" href="mainloop_8c_source.html#l00151">timeout_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00456">mainloop_add_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a42b3dce8d57fa7c39152e9ca0731cc9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timeout_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00414">414</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>References <a class="el" href="mainloop_8c_source.html#l00150">timeout_data::destroy</a>, <a class="el" href="mainloop_8c_source.html#l00148">timeout_data::fd</a>, and <a class="el" href="mainloop_8c_source.html#l00151">timeout_data::user_data</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00456">mainloop_add_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="adddfd93042e7423109cc8ab1b08c2917"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int timeout_set </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00442">442</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00456">mainloop_add_timeout()</a>, and <a class="el" href="mainloop_8c_source.html#l00497">mainloop_modify_timeout()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ae4afe2171ee3ec9b9cce747171f0b20d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int epoll_fd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00131">131</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00320">mainloop_add_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00169">mainloop_init()</a>, <a class="el" href="mainloop_8c_source.html#l00364">mainloop_modify_fd()</a>, <a class="el" href="mainloop_8c_source.html#l00390">mainloop_remove_fd()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a64cf39a3bf05e24f4d0331c85c07e827"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int epoll_terminate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00132">132</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00203">mainloop_exit_failure()</a>, <a class="el" href="mainloop_8c_source.html#l00193">mainloop_exit_success()</a>, <a class="el" href="mainloop_8c_source.html#l00169">mainloop_init()</a>, <a class="el" href="mainloop_8c_source.html#l00184">mainloop_quit()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a9324a9ff7dc6697dd77f02998d5e77d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int exit_status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00133">133</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

<p>Referenced by <a class="el" href="mainloop_8c_source.html#l00203">mainloop_exit_failure()</a>, <a class="el" href="mainloop_8c_source.html#l00193">mainloop_exit_success()</a>, and <a class="el" href="mainloop_8c_source.html#l00242">mainloop_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a83f2fabeb2cfcd6ddbba570d68c4b947"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmainloop__data.html">mainloop_data</a>* mainloop_list[<a class="el" href="mainloop_8c.html#ae55077ef9c427822b4a8981903d293ee">MAX_MAINLOOP_ENTRIES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00145">145</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa807b18251fb64f848595c04cef4b27f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsignal__data.html">signal_data</a>* <a class="el" href="structsignal__data.html">signal_data</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mainloop_8c_source.html#l00162">162</a> of file <a class="el" href="mainloop_8c_source.html">mainloop.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="mainloop_8c.html">mainloop.c</a></li>
    <li class="footer">Generated on Thu Jul 30 2015 14:49:13 for ble_gatt_client by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
